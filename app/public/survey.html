<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Cherry+Cream+Soda|Gochi+Hand|Special+Elite');
    </style>
    <meta charset="UTF-8">
    <title>Find your new best friends</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    

 
</head>

<body>



    <div class=" mainCont container-fluid text-center">
        <a href="/"><button class="btn">Go back home</button></a>
        <!-- <a href="/bestFriends"><button class="btn">RESULTS!!!</button></a> -->
        <div class="form-group">
            <h2> <label class="name" for="formGroupExampleInput">Enter your name</label></h2>
            <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Your name goes here...." required>
        </div>
        <div class="form-group">
            <h2><label for="formGroupExampleInput2">Add the link to your picture</label></h2>
            <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="Your Picture url goes here..." required>
        </div>
    </div>
    <div class="wrap container-fluid text-center">
        <h1 class="likert-header">Find your Prefect Match</h1>
        <form action="">
            <label class="statement">Coding is Frustratingly hard at times</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question1" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">It's clear that this is a responsive design.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question2" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Codepen.io is an excellent tool for prototyping.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question3" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Comments should be clear and concise</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question4" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Debugging is very important</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question5" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement"> It is best practice to write a function that does one action</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question6" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Frameworks make life easier</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question7" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Learning how to use Git is very important</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question8" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">It is important to minify your code</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question9" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Desing all websites mobile first</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question10" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
        </form>
        </div>
        <div class="row">
                <div class="col-lg-5 col-md-5"></div>
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-6">
                <div class="results">
                <a href="/bestFriends"><button class="btn btn-info" data-toggle="modal" data-target="#myModal">RESULTS!!!</button></a>
                <button class="clear btn btn-danger">Clear</button>
                </div>
            </div>
        </div>
            <!-- <div class="buttons">
                <button class="clear btn btn-danger">Clear</button>
                <a href="/bestFriends"><button class="submit btn btn-info">Submit</button></a>
                <a href="/bestFriends"><button type="submit" class="btn btn-primary btn-md" id="search-btn"><span class="glyphicon glyphicon-search"></span>This button takes you to the top of the page</button></a>
                
            </div> -->
            
        </form>

        <div id="myModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Best Friends</h4>
                </div>
                <div class="modal-body">
                  <p>Look who is now best friends</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
          
            </div>
          </div>

 

  
    


</body>
    <script>
            var stuff = [];
    for (i = 1; i <= 10; i++) {

        var element = document.getElementsByName('question' + [i])

        stuff.push(element)
    }
    for (var i = 0; i < 10; i++) {
        var random = Math.floor(Math.random() * 5)
        stuff[i][random].checked = true
    }

    $(document).ready(function() {
         $('.btn-info').on('click', (e)=>{
             e.preventDefault();
            
             var answers = $('input[name]:checked')
             var total = []
            for (var i = 0; i < answers.length; i++) {
                total.push(parseInt(answers[i].value))
                // total += parseInt(answers[i].value)
            }
            var sum = total.reduce((a,b)=>a+b)
            console.log('SUM IS: ', sum)
            var friend = {
            name: $('#formGroupExampleInput')[0].value.trim(),
            photo: $('#formGroupExampleInput2')[0].value.trim(),
            scores: [...total],
            total:sum
            }
            console.log(`friend1: ${friend}`)
            // or you can make GET here and ge all data and evaluate
            //or make post here 

             function runTableQuery() {

      // Here we get the location of the root page.
      // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
      var currentURL = window.location.origin;

      // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
      $.ajax({ url: currentURL + "/api/friends", method: "GET" })
      .done(function(friendsData) {

        // Here we are logging the URL so we have access to it for troubleshooting
        console.log("------------------------------------");
        console.log("URL: " + currentURL + "/api/friends");
        console.log("------------------------------------");

        // Here we then log the NYTData to console, where it will show up as an object.
        console.log(friendsData);
        console.log("------------------------------------");

        var current = friendsData.pop()
        console.log(current)

        // Loop through and display each of the customers
        for (var i = 0; i < friendsData.length; i++) {
            
          
          var bestFriend = [];
          
        }

          for (var j = 0; j < friendsData.length; j++) {
            console.log(`current ${current.name}`)
            console.log(friendsData[0])
            console.log(friendsData[j].total);
            if (current.total === friendsData[j].total ){
                bestFriend = friendsData[j]
            } else if (current.total - 1 === friendsData[j].total || current.total + 1 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 2 === friendsData[j].total || current.total + 2 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 3 === friendsData[j].total || current.total + 3 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 4 === friendsData[j].total || current.total + 4 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 5 === friendsData[j].total || current.total + 5 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 6 === friendsData[j].total || current.total + 6 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 7 === friendsData[j].total || current.total + 7 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 8 === friendsData[j].total || current.total + 8 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } else if (current.total - 9 === friendsData[j].total || current.total + 9 === friendsData[j].total) {
                bestFriend = friendsData[j]
            }
              else if (current.total - 10 === friendsData[j].total || current.total + 10 === friendsData[j].total) {
                bestFriend = friendsData[j]
            } 
            } 

          
          console.log(`best friend ${bestFriend}`);
          console.log(`current friend ${current.name}`);
          // Create the HTML Well (Section) and Add the table content for each reserved table
          var tableSection = $("<div>");
          tableSection.addClass("well");
          tableSection.attr("id", "tableWell-" + i + 1);
          $(".modal-body").append(tableSection);

          var tableNumber = i + 1;


          // Then display the remaining fields in the HTML (Section Name, Date, URL)
          $("#tableWell-" + i + 1).prepend(`<h2><span class='label label-primary'>Are you ready!!! </span> | ${current.name} | total: ${current.total} |
              friendship differential ${current.total - bestFriend.total} <img src="${current.photo}"> </h2>`);
          if (bestFriend){
          $("#tableWell-" + i + 1).append(`<h2><span class='label label-primary'>BFFS FORVER...FOOORRREEEVVVVEERRRR </span> | ${bestFriend.name} total: ${bestFriend.total}  <img src="${bestFriend.photo}"> </h2>`);
        } else {
            $("#tableWell-" + i + 1).append(`<h2>Best Friend not found 😦</h2>`)
        }
      });
     }
    
    runTableQuery();
            $.post("/api/friends", friend, function (data) {
            
             });
            
         })


    })
    
    
    
    </script>
    
</html>
